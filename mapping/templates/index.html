<!DOCTYPE HTML>
<html>
    <head>
        <style>
          html, body {
            height: 100%;
            margin: 0;
            padding: 0;
          }
          #map {
            height: 100%;
          }
        </style>
        <script   src="http://code.jquery.com/jquery-3.1.1.min.js"   integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8="   crossorigin="anonymous"></script>
    </head>
    <body>
        <div id="map"></div>
        <script>
          var map;
          function initMap() {
            map = new google.maps.Map(document.getElementById('map'), {
              center: {lat: 51.7606, lng: -1.259},
              zoom: 9
            });

            var infowindow = new google.maps.InfoWindow();

            function addMarker(lat, lng, label) {
                var marker = new google.maps.Marker({
                    position: {'lat': lat, 'lng': lng},
                    icon: {path: google.maps.SymbolPath.CIRCLE, scale: 3},
                    map: map
                });
                marker.addListener('click', function() {
                    infowindow.setContent(label);
                    infowindow.open(map, marker);
                });
            }

            $.getJSON('/sampling-points/', function(data) {
                for (var point of data.items) {
                    addMarker(point.lat, point.lng, point.label);
                }
            });

          }
        </script>
        <script src="https://maps.googleapis.com/maps/api/js?key={{ google_maps_api_key }}&amp;callback=initMap"
        async defer></script>
    </body>
</html>
